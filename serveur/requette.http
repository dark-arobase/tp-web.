####################################################################
#                  TESTS - GESTION UTILISATEURS                    #
####################################################################
curl -X GET http://localhost:3000/alluser
####################################################################

curl -X POST http://localhost:3000/adduser \
     -H "Content-Type: application/json" \
     -d '{
           "username": "admin",
           "password": "password123"
         }'
####################################################################
curl -X POST http://localhost:3000/login
     -H "Content-Type: application/json" \
     -d '{
           "username": "admin",
           "password": "password123"
         }'

##########################CLIENTS##########################################
curl -X GET http://localhost:3000/allClients
####################################################################
curl -X POST http://localhost:3000/addClient \
     -H "Content-Type: application/json" \
     -d '{
           "nom": "Tremblay",
           "prenom": "Marie",
           "telephone": "5145559876",
           "email": "marie.tremblay@example.com",
           "adresse": "456 Rue Sherbrooke, Montreal, QC"
         }'
####################################################################
curl -X PUT http://localhost:3000/updateClient/5f2d2332-d18c-4d47-ba11-4794d36b4b37 \
     -H "Content-Type: application/json" \
     -d '{
           "nom": "Tremblay",
           "prenom": "Marie-Claude",
           "telephone": "5145559999",
           "email": "marie.claude@example.com",
           "adresse": "789 Boulevard René-Lévesque, Montreal, QC"
         }'

####################################################################
curl -X DELETE http://localhost:3000/deleteClient/5f2d2332-d18c-4d47-ba11-4794d36b4b37

##########################          PRET       ##########################################

curl -X GET http://localhost:3000/allLoans

##########################PRET##########################################
curl -X GET http://localhost:3000/allClients
####################################################################
curl -X POST http://localhost:3000/addLoan \
     -H "Content-Type: application/json" \
     -d '{
           "client_id": "907f215a-94f5-4331-babf-1e5ea71b6757",
           "montant": 5000,
           "taux": 6,
           "duree": 24,
           "date": "2025-12-06"
         }'

##########################PRET##########################################
curl -X PUT http://localhost:3000/editLoan/ba1cff79-56e1-4ff8-bc9c-d1d147469063 \
     -H "Content-Type: application/json" \
     -d '{
           "client_id": "907f215a-94f5-4331-babf-1e5ea71b6757",
           "montant": 6000,
           "taux": 5.5,
           "duree": 30,
           "date": "2025-12-06"
         }'

##########################PRET##########################################
curl -X DELETE http://localhost:3000/deleteLoan/ba1cff79-56e1-4ff8-bc9c-d1d147469063

####################################################################
#                   TESTS - GESTION PAIEMENTS                      #
####################################################################


curl -X GET http://localhost:3000/allLoans

####################################################################
curl -X GET http://localhost:3000/allClients
####################################################################
####################################################################
curl -X GET http://localhost:3000/allPaiements

####################################################################
curl -X GET http://localhost:3000/paiements/ba1cff79-56e1-4ff8-bc9c-d1d147469063

####################################################################
curl -X POST http://localhost:3000/addPaiement \
     -H "Content-Type: application/json" \
     -d '{
           "loan_id": "ba1cff79-56e1-4ff8-bc9c-d1d147469063",
           "montant": 250,
           "date": "2025-12-15",
           "mode": "Cash",
           "note": "Premier paiement mensuel"
         }'

####################################################################
curl -X PUT http://localhost:3000/editPaiement/PAYMENT_ID_HERE \
     -H "Content-Type: application/json" \
     -d '{
           "loan_id": "LOAN_ID_HERE",
           "montant": 300,
           "date": "2025-12-15",
           "mode": "Virement",
           "note": "Paiement modifié"
         }'

# 13. Supprimer un paiement
curl -X DELETE http://localhost:3000/deletePaiement/PAYMENT_ID_HERE


####################################################################
#                 TESTS DE VALIDATION & ERREURS                    #
####################################################################

# Client sans nom (erreur attendue 400)
curl -X POST http://localhost:3000/addClient \
     -H "Content-Type: application/json" \
     -d '{
           "prenom": "Test",
           "telephone": "5145550000",
           "email": "test@example.com",
           "adresse": "123 Test St"
         }'

# Client avec email invalide
curl -X POST http://localhost:3000/addClient \
     -H "Content-Type: application/json" \
     -d '{
           "nom": "Test",
           "prenom": "Test",
           "telephone": "5145550000",
           "email": "email-invalide",
           "adresse": "123 Test St"
         }'

# Prêt sans client_id
curl -X POST http://localhost:3000/addLoan \
     -H "Content-Type: application/json" \
     -d '{
           "montant": 5000,
           "taux": 6,
           "duree": 24,
           "date": "2025-12-06"
         }'

# Paiement avec montant négatif
curl -X POST http://localhost:3000/addPaiement \
     -H "Content-Type: application/json" \
     -d '{
           "loan_id": "LOAN_ID_HERE",
           "montant": -100,
           "date": "2025-12-06",
           "mode": "Cash",
           "note": "Test erreur"
         }'

####################################################################
#                 TEST SCÉNARIO COMPLET CLIENT-PRÊT-PAIEMENT       #
####################################################################

# Étape 1: Créer un client
curl -X POST http://localhost:3000/addClient \
     -H "Content-Type: application/json" \
     -d '{
           "nom": "Bouchard",
           "prenom": "Jean",
           "telephone": "4385551234",
           "email": "jean.bouchard@example.com",
           "adresse": "100 Rue Ontario, Montreal, QC"
         }'

#################################################################